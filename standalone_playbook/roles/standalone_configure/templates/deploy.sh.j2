#!/bin/bash

set -xeo pipefail

sudo openstack tripleo deploy --yes \
--templates /usr/share/openstack-tripleo-heat-templates \
--stack standalone \
--standalone-role Standalone \
--local-ip {{ IP }}/{{ NETMASK }} \
--control-virtual-ip {{ VIP }} \
-e /usr/share/openstack-tripleo-heat-templates/environments/standalone/standalone-tripleo.yaml \
-r /usr/share/openstack-tripleo-heat-templates/roles/Standalone.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/low-memory-usage.yaml \
-e $HOME/containers-prepare-parameters.yaml \
-e $HOME/standalone_parameters.yaml \
--output-dir $HOME/tripleo_output \
--reproduce-command > $HOME/standalone_deploy.log 2>&1
